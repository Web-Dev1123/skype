define("scom/Carousel/Carousel",["scom/Carousel/Carousel.helpers"],function(t){"use strict";function e(e,s){if(!t.elementExist(e))return!1;this._defaults={animated:!1,arrows:!0,draggable:!1,autoWidth:!0,slideToShow:1,speed:200,mainPadding:0,stagePadding:0,endPadding:0,margin:0,overflow:"hidden",responsive:!0,aria:!1,easing:"ease-in-out",itemClass:".item",awaTracking:{prev:null,next:null},prevArrow:"<div class='arrowsSlider arrowPrev textAndFontIcon iconCenter'><span class='icon iconActive'></span></div>",nextArrow:"<div class='arrowsSlider arrowNext textAndFontIcon iconCenter'><span class='icon iconActive'></span></div>",breakpoints:{}},$.extend(this._defaults,s);var i=document.querySelector(e),n=i.querySelectorAll(this._defaults.itemClass),a={$target:i,$main:t.createElement("div","SkySlider-main",{overflow:this._defaults.overflow,padding:this._defaults.mainPadding}),$stage:t.createElement("div","SkySlider-stage",{padding:this._defaults.stagePadding}),$aria:t.createElement("div"),stageWidth:0,slideWidth:0,$prevArrow:t.createTracking(t.createElement("a","SkySlider-prev"),{"data-bi-name":this._defaults.awaTracking.prev,role:"button","aria-label":this._defaults.awaTracking.prev,title:$("#prevArrowLabel").attr("value")}),$nextArrow:t.createTracking(t.createElement("a","SkySlider-next"),{"data-bi-name":this._defaults.awaTracking.next,role:"button","aria-label":this._defaults.awaTracking.next,title:$("#nextArrowLabel").attr("value")}),$slides:n,totalSlides:n.length,stageTranslate:0,sortedBreakpointsKeys:Object.keys(this._defaults.breakpoints).sort(),currentSlide:0,currentFocusAria:0,fitSlide:0};this.settings=$.extend({},this._defaults,a),t.nodeListForEachSupport(),this.preInit(),this.init()}return e.prototype.preInit=function(){this.settings.$target.className+=" initialized",this.getBreakpoint(),this.calcStageAndSlides()},e.prototype.init=function(){this.copyItemsToStage(),this.appendSlider(),this.trackActiveSlides(),this.appendArrows(),this.accessibility(),this.inFocus(),this.settings.responsive&&this.onResize()},e.prototype.reset=function(){this.settings.currentSlide=0,this.settings.stageTranslate=0,this.settings.$stage.style.transform="translateX(0px)",this.getBreakpoint(),this.calcStageAndSlides(),this.trackActiveSlides(),this._updateArrows()},e.prototype.copyItemsToStage=function(){this.settings.$slides.forEach(function(e,s){e.className+=" SkySlider-item",t.isRtl()?e.style.marginLeft=this.settings.margin+"px":e.style.marginRight=this.settings.margin+"px",e.setAttribute("data-slide",s+1),e=this.settings.animated?t.withAnimationCSS(e,s):e,this.settings.$stage.appendChild(e)}.bind(this))},e.prototype.appendSlider=function(){this.settings.$target.innerHTML="",this.settings.$main.appendChild(this.settings.$stage),this.settings.$target.appendChild(this.settings.$main)},e.prototype.appendArrows=function(){if(this.settings.arrows){var e=t.createElement("div","SkySlider-arrows");t.appendHTML(this.settings.prevArrow,this.settings.$prevArrow),t.appendHTML(this.settings.nextArrow,this.settings.$nextArrow),e.appendChild(this.settings.$prevArrow),e.appendChild(this.settings.$nextArrow),this.settings.$main.appendChild(e),this.settings.$nextArrow=t.getDOMRef(this.settings.$main,".SkySlider-next"),this.settings.$prevArrow=t.getDOMRef(this.settings.$main,".SkySlider-prev"),this.settings.$nextArrow.addEventListener("click",this.next.bind(this)),this.settings.$prevArrow.addEventListener("click",this.prev.bind(this)),this._updateArrows()}},e.prototype.getBreakpoint=function(){var t=document.body.clientWidth;this.settings.sortedBreakpointsKeys[0]<t?($.extend(this.settings,this._defaults),this.updateElementStyles()):this.settings.sortedBreakpointsKeys.map(function(e){t<=Number(e)&&($.extend(this.settings,this.settings.breakpoints[e]),this.updateElementStyles())}.bind(this))},e.prototype.updateElementStyles=function(){this.settings.$main.style.overflow=this.settings.overflow,this.settings.$main.style.padding=this.settings.mainPadding,this.settings.$slides.forEach(function(e){t.isRtl()?e.style.marginLeft=this.settings.margin+"px":e.style.marginRight=this.settings.margin+"px"}.bind(this))},e.prototype.calcSlideToShow=function(){var e=t.getDimensions(this.settings.$target).innerWidth/this.settings.slideToShow,s=e*this.settings.totalSlides;this.settings.$slides.forEach(function(t){t.style.width=e+"px"}),$.extend(this.settings,{stageWidth:s,slideWidth:e}),this.settings.$stage.style.width=s+"px"},e.prototype.calcAutoWidth=function(){var e=this.settings.$slides,s=this.settings.margin,i=t.getDimensions(e[0].firstElementChild).width,n=(i+s)*e.length;this.settings.$slides.forEach(function(t){t.style.width="auto"}),$.extend(this.settings,{stageWidth:n,slideWidth:i}),this.settings.$stage.style.width=n+"px"},e.prototype.calcStageAndSlides=function(){this.settings.autoWidth?this.calcAutoWidth():this.calcSlideToShow()},e.prototype.trackActiveSlides=function(){var e=this.settings.slideWidth+this.settings.margin,s=this.settings.currentSlide,i=t.getDimensions(this.settings.$main).width,n=Math.floor(i/e);this.settings.fitSlide=n,this.settings.$slides.forEach(function(t,e){$(t).removeClass("hidden"),n<1?$(t).addClass("active"):s<=e&&e<n+s?$(t).addClass("active"):$(t).removeClass("active")})},e.prototype.getAnimState=function(){var e=this.settings.slideWidth+this.settings.margin,s=t.getDimensions(this.settings.$main).width,i=this.settings.stageWidth-s/e*e;return{step:e,endPadding:this.settings.endPadding,startPosition:0,finalPosition:i}},e.prototype.prev=function(t){t&&t.preventDefault(),this.handleScrollPrev(),this._updateArrows()},e.prototype.handleScrollPrev=function(){var t=this.getAnimState();this.settings.stageTranslate!==t.startPosition&&(this.settings.stageTranslate>t.initialTranslate&&(this.settings.stageTranslate=t.startPosition),this.settings.stageTranslate+=t.step,this.settings.currentSlide-=1,this.animate(this.settings.stageTranslate))},e.prototype.next=function(t){t&&t.preventDefault(),this.handleScrollNext(),this._updateArrows()},e.prototype.handleScrollNext=function(){var t=this.getAnimState();this.settings.stageTranslate<=-t.finalPosition||(this.settings.stageTranslate-=t.step,this.settings.currentSlide+=1,this.animate(this.settings.stageTranslate))},e.prototype.animate=function(e){var s=t.isRtl()?e-2*e:e;this.settings.$stage.style.transform="translateX("+s+"px)",this.settings.$stage.style.transitionDuration=this.settings.speed+"ms",this.settings.$stage.style.transitionTimingFunction=this.settings.easing,this.trackActiveSlides()},e.prototype._updateArrows=function(){var t=this.getAnimState();this.settings.totalSlides<=this.settings.fitSlide?this._hideArrow("all"):this.settings.stageTranslate>=t.startPosition?this._hideArrow("prev"):Math.abs(this.settings.stageTranslate)>=Math.abs(t.finalPosition)?this._hideArrow("next"):this._hideArrow("none")},e.prototype._hideArrow=function(t){"prev"===t&&(this.settings.$nextArrow.style.display="block",this.settings.$prevArrow.style.display="none"),"next"===t&&(this.settings.$nextArrow.style.display="none",this.settings.$prevArrow.style.display="block"),"none"===t&&(this.settings.$nextArrow.style.display="block",this.settings.$prevArrow.style.display="block"),"all"===t&&(this.settings.$nextArrow.style.display="none",this.settings.$prevArrow.style.display="none")},e.prototype.onResize=function(){t.onResize(this.reset.bind(this))},e.prototype.openChildrenLink=function(){var t=document.activeElement,e=$(t).find("a")[0];e&&e.click()},e.prototype.moveNextFocus=function(t){this._setFocusItem("next",t)},e.prototype.movePrevFocus=function(){this._setFocusItem("prev",event)},e.prototype._setFocusItem=function(t,e){var s=this.settings.fitSlide,i=this.settings.totalSlides,n=$(document.activeElement).closest(this.settings.itemClass)[0];if(!n)return null;var a,r=Number(n.getAttribute("data-slide"));if("next"===t&&(a=r+1,s<=(this.settings.currentFocusAria=a)&&this.next()),"prev"===t&&(a=r-1,(this.settings.currentFocusAria=a)<=s+2&&this.prev()),a===i+1||0===a)return!1;var o=this.settings.$stage.querySelector("[data-slide='"+a+"']"),l=$(o).find("a")[0];return setTimeout(function(){l&&$(l).focus()},100),this.updateAriaLive(),e.preventDefault(),e.stopImmediatePropagation(),!1},e.prototype.appendAriaLive=function(){this.settings.aria&&(this.settings.$aria.setAttribute("aria-live","polite"),this.settings.$aria.setAttribute("aria-atomic","true"),this.settings.$aria.setAttribute("role","region"),this.settings.$aria.setAttribute("class","liveregion visuallyhidden"),this.settings.$aria.id="SkySlider-liveregion",this.settings.$main.appendChild(this.settings.$aria),this.updateAriaLive())},e.prototype.updateAriaLive=function(){if(this.settings.aria){var t=this.settings.totalSlides,e=this.settings.currentFocusAria+1;this.settings.$aria.textContent="Item "+e+" of "+t}},e.prototype.accessibility=function(){var e=t.throttled(this.settings.speed,function(e){var s=t.getKeyDir(e);"next"===s&&this.moveNextFocus(e),"prev"===s&&this.movePrevFocus(e),"enter"===s&&this.openChildrenLink()}.bind(this));this.settings.$main.addEventListener("keydown",e.bind(this)),this.appendAriaLive()},e.prototype.inFocus=function(){this.settings.$main.addEventListener("focusin",function(t){t.preventDefault();var e=$(document.activeElement).closest(this.settings.itemClass)[0],s=Number(e.getAttribute("data-slide"));$(e).hasClass("active")||1!==s||this.reset()}.bind(this))},e});